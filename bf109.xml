<?xml version="1.0"?>

<!--
************************************************************************
YASim aerodynamic model for a Messerschmidt Bf 109

************************************************************************
-->

<!-- Weight of everything but fuel  -->
<airplane mass="5902">

<!-- Approach configuration -->
<approach speed="87" aoa="8">
  <control-setting axis="/controls/engines/engine[0]/throttle" value="0.3"/>
  <control-setting axis="/controls/engines/engine[0]/mixture" value="0.65"/>
  <control-setting axis="/controls/engines/engine[0]/propeller-pitch" value="0.5"/>
  <control-setting axis="/controls/flight/flaps" value="1.0"/>
  <control-setting axis="/controls/gear/gear-down" value="1"/>
  <control-setting axis="/controls/flight/slats" value="1.0"/>
</approach>

<!-- Cruise configuration -->
<cruise speed="325" alt="5000">
  <control-setting axis="/controls/engines/engine[0]/throttle" value="1.00"/>
  <control-setting axis="/controls/engines/engine[0]/mixture" value="1.00"/>
  <control-setting axis="/controls/engines/engine[0]/propeller-pitch" value="1.0"/>
  <control-setting axis="/controls/engines/engine[0]/boost" value="1.0"/>
  <control-setting axis="/controls/flight/flaps" value="0.0"/>
  <control-setting axis="/controls/gear/gear-down" value="0"/>
</cruise>

<!-- pilot's eyepoint -->
<cockpit x="-3.695" y="0" z="0.6"/>

<fuselage ax="0.0" ay="0.0" az="0.0" bx="-8.9" by="0.0" bz="0.0"
          width="0.84" taper="0.68"/>


<wing x="-3.24" y="0.42" z="-0.32" taper="0.445" incidence="-1.0"
      length="4.4" chord="2.245" sweep="-1.8" dihedral="5" camber="0.1">
  <stall aoa="12" width="8" peak="1.5"/>
  <flap0 start="0.014" end="0.5" lift="1.7" drag="2.2"/>
  <flap1 start="0.5" end="0.9" lift="1.3" drag="1.6"/>
  <slat aoa="0" start="0.455" end="0.9" lift="0.2" drag="0.3"/>
  <control-input axis="/controls/flight/flaps" control="FLAP0"/>
  <control-output control="FLAP0" prop="/surface-positions/flap-pos-norm"/>
  <control-speed control="FLAP0" transition-time="7"/>
  <control-input axis="/controls/flight/slats" control="SLAT"/>
  <control-output control="SLAT" prop="/surface-positions/slat-pos-norm"/>
  <control-speed control="SLAT" transition-time="0.1"/>
  <control-input axis="/controls/flight/aileron" control="FLAP1" split="true"/>
  <control-input axis="/controls/flight/aileron-trim" control="FLAP1" split="true"/>
</wing>

<hstab x="-8.15" y="0.3" z="0.91" taper="0.689" effectiveness="1.0"
       length="1.334" chord="0.956" sweep="0" >
  <stall aoa="15" width="4" peak="1.5"/>
  <flap0 start="0.0" end="1.5" lift="1.55" drag="1.2"/>
  <control-input axis="/controls/flight/elevator" control="FLAP0"/>
  <control-input axis="/controls/flight/elevator-trim" control="FLAP0"/>
  <control-output control="FLAP0" prop="/surface-positions/elevator-pos-norm"/>
</hstab>

<!-- rudder has to be able to counteract aileron drag -->
<vstab x="-8.30" y="0" z="0.25" taper="0.592" effectiveness="3.0"
       length="1.334" chord="1.556" sweep="25"  incidence="-0.58">
  <stall aoa="15" width="4" peak="1.5"/>
  <flap0 start="0" end="1" lift="1.3" drag="1.2"/>
  <control-input axis="/controls/flight/rudder" square="true" control="FLAP0" invert="true"/>
  <control-input axis="/controls/flight/rudder-trim" control="FLAP0" invert="true"/>
  <control-output control="FLAP0" prop="/surface-positions/rudder-pos-norm"
    min="1" max="-1"/>
</vstab>


<propeller   x="-0.75" y="0" z="0"
           radius="1.75" 
           mass="1690" moment="94.5"
           cruise-alt="20000" cruise-power="1350"
           cruise-speed="360" cruise-rpm="1157"
           gear-ratio="0.479"
           min-rpm="766" max-rpm="1337" >
  <actionpt x="-1.25" y="0" z="0"/>
  <control-input axis="/controls/engines/engine[0]/propeller-pitch" control="ADVANCE" />
  <piston-engine
    eng-power="1695" eng-rpm="2600"
    turbo-mul="2" wastegate-mp="61"
    >
    <control-input axis="/controls/engines/engine[0]/throttle" control="THROTTLE"/>
    <control-input axis="/controls/engines/engine[0]/starter" control="STARTER"/>
    <control-input axis="/controls/engines/engine[0]/magnetos" control="MAGNETOS"/>
    <control-input axis="/controls/engines/engine[0]/mixture" control="MIXTURE"/>
    <control-input axis="/controls/engines/engine[0]/boost" control="BOOST"/>
  </piston-engine>

</propeller>


<!-- Tail wheel -->

<gear x="-7.80" y="0" z="-0.37" compression="0.2" castering="1"
  dfric="0.1" sfric ="0.20">
  <control-input axis="/controls/gear/tailwheel-lock" control="CASTERING" 
                 src0="0" src1="1"
                 dst0="1" dst1="0"/>
</gear>

 <!-- left main -->
<gear x="-2.03" y="0.97" z="-1.67" compression="0.2" spring="0.7" damp="3.0"
   dfric="0.05" sfric ="0.10">
  <control-input axis="/controls/gear/brake-left" control="BRAKE"/>
  <control-input axis="/controls/gear/brake-parking" control="BRAKE" split="true"/>
  <control-input axis="/controls/gear/gear-down" control="EXTEND"/>
  <control-speed control="EXTEND" transition-time="6"/>
  <control-output control="EXTEND" prop="/gear/gear[0]/position-norm"/>
</gear>

 <!-- right main -->
<gear x="-2.03" y="-0.97" z="-1.62" compression="0.2" spring="0.7" damp="3.0"
   dfric="0.05" sfric ="0.10">
  <control-input axis="/controls/gear/brake-right" control="BRAKE"/>
  <control-input axis="/controls/gear/brake-parking" control="BRAKE" split="true"/>
  <control-input axis="/controls/gear/gear-down" control="EXTEND"/>
  <control-speed control="EXTEND" transition-time="6"/>
  <control-output control="EXTEND" prop="/gear/gear[1]/position-norm"/>
</gear>

 
<tank x="-3.70" y="0" z="0" capacity="705"/> 

<!-- pilot -->
<ballast x="-3.5" y="0" z="0.689" mass="180"/>



</airplane>
